{% extends 'bundles/EasyAdminBundle/page/login.html.twig' %}

{% block page_title %}Вход{% endblock %}

{% block header_logo %}BackPackers{% endblock %}

{% block form %}
    <section class="content">
        <form method="post" action="{{ action|default('') }}">
            <input type="hidden" name="_csrf_token"
                   value="{{ csrf_token('authenticate') }}"
            >

            <input type="hidden" name="{{ target_path_parameter|default('_target_path') }}" value="{{ target_path|default(ea is defined ? path(ea.dashboardRouteName) : '/') }}" />

            <div class="form-group field-text">
                <label for="username" class="sr-only form-control-label required">{{ _username_label }}</label>
                <div class="form-widget form-widget-with-icon">
                    <i class="fa fa-fw fa-user"></i>
                    <input type="email" name="email" id="inputEmail" class="form-control" required autofocus>
                </div>
            </div>

            <div class="form-group field-password">
                <label for="password" class="sr-only form-control-label required">{{ _password_label }}</label>
                <div class="form-widget form-widget-with-icon">
                    <i class="fa fa-fw fa-lock"></i>
                    <input type="password" name="password" id="inputPassword" class="form-control" required>
                </div>
            </div>

            <div class="form-group field-button">
                <button type="submit" class="btn btn-primary btn-lg btn-block">{{ _sign_in_label }}</button>
            </div>
        </form>

        <script type="text/javascript">
            const loginForm = document.querySelector('form');
            loginForm.addEventListener('submit', () => {
                loginForm.querySelector('button[type="submit"]').setAttribute('disabled', 'disabled');
            }, false);
        </script>
    </section>
{% endblock %}